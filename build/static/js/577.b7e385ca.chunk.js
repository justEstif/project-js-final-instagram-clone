"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[577],{3287:function(e,n,t){var r=t(2791),s=t(5187),a=t(3504),o=t(2303),c=t(6307),i=t(8155),u=t(8175),l=t(184);n.Z=function(){var e=(0,r.useContext)(o.Z).firebase.auth,n=(0,r.useContext)(c.Z).user;return(0,l.jsx)("header",{className:"h-16 bg-white border-b border-gray-primary mb-8",children:(0,l.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:(0,l.jsxs)("div",{className:"flex justify-between h-full",children:[(0,l.jsx)("div",{className:"text-gray-700 text-center flex items-center justify-center cursor-pointer",children:(0,l.jsx)("h1",{className:"flex w-full",children:(0,l.jsx)(a.rU,{to:i.h1,"aria-label":"Instagram logo",children:(0,l.jsx)("img",{src:"./images/logo.png",className:"mt-2 w-6/12",alt:"instagram logo"})})})}),(0,l.jsx)("div",{className:"text-gray-700 text-center flex items-center justify-center",children:n?(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(a.rU,{to:i.h1,"aria-label":"Dashboard",children:(0,l.jsx)("svg",{className:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,l.jsx)("button",{title:"Sign out",type:"button",onKeyDown:function(n){return"Enter"===n.key&&(0,s.w7)(e)},onClick:function(){return(0,s.w7)(e)},children:(0,l.jsx)("svg",{className:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,l.jsx)("div",{className:"flex items-center cursor-pointer",children:(0,l.jsx)(a.rU,{to:"/p/".concat(n.displayName),children:(0,l.jsx)("img",{className:"rounded-full h-8 w-8 flex",src:(0,u.Z)("./images/avatars/".concat(n.displayName,".jpg")),alt:"".concat(n.displayName," img")})})})]}):(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(a.rU,{to:i.ym,children:(0,l.jsx)("button",{type:"button",className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8  flex items-center justify-center",children:"Log In"})}),(0,l.jsx)(a.rU,{to:i._5,children:(0,l.jsx)("button",{type:"button",className:" text-blue-medium font-bold text-sm rounded w-20 h-8",children:"Sign Up"})})]})})]})})})}},6920:function(e,n,t){var r=t(4165),s=t(5861),a=t(885),o=t(2791),c=t(6307),i=t(7606);n.Z=function(){var e=(0,o.useState)({}),n=(0,a.Z)(e,2),t=n[0],u=n[1],l=(0,o.useContext)(c.Z).user;return(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.xD)(l.uid);case 2:n=e.sent,t=(0,a.Z)(n,1),s=t[0],u(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null!==l&&void 0!==l&&l.uid&&e()}),[l]),{user:t}}},3577:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(4165),s=t(5861),a=t(885),o=t(2791),c=t(6839),i=t(6871),u=t(7606),l=t(8155),d=t(3287),f=t(1413),p=t(6920),h=t(8175),m=t(184),x=function(e){var n=e.photosCount,t=e.followerCount,i=e.setFollowerCount,l=e.profile,d=l.docId,f=void 0===d?"":d,x=l.userId,v=l.fullName,w=l.username,g=l.following,Z=void 0===g?[]:g,b=l.followers,j=void 0===b?[]:b,y=(0,p.Z)().user,N=(0,o.useState)(!1),k=(0,a.Z)(N,2),C=k[0],I=k[1],L=y.username&&y.username!==w,O=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I((function(e){return!e})),e.next=3,(0,u.Gm)(C,y.docId,f,x,y.userId);case 3:i({followerCount:C?t-1:t+1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.IU)(y.username,x);case 2:n=e.sent,I(!!n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();y.username&&x&&e()}),[x,y.username]),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg",children:[(0,m.jsx)("div",{className:"container flex justify-center",children:y.username&&(0,m.jsx)("img",{className:"rounded-full h-40 w-40 flex",src:(0,h.Z)("./images/avatars/".concat(w,".jpg")),alt:"".concat(w," profile pic")})}),(0,m.jsxs)("div",{className:"flex items-center justify-center flex-col col-span-2",children:[(0,m.jsxs)("div",{className:"container flex items-center",children:[(0,m.jsx)("p",{className:"text-2xl mr-4",children:w}),L&&(0,m.jsx)("button",{className:"".concat(C?"bg-gray-primary text-blue-medium":"bg-blue-medium text-white"," font-bold text-sm rounded w-20 h-8"),type:"button",onKeyDown:function(e){"Enter"===e.key&&O()},onClick:O,children:C?"Unfollow":"Follow"})]}),(0,m.jsx)("div",{className:"container flex mt-4",children:void 0===j||void 0===Z?(0,m.jsx)(c.Z,{count:1,width:677,height:24}):(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)("p",{className:"mr-10",children:[(0,m.jsx)("span",{className:"font-bold",children:n})," ",1===n?"post":"posts"]}),(0,m.jsxs)("p",{className:"mr-10",children:[(0,m.jsx)("span",{className:"font-bold",children:t})," ",1===t?"follower":"followers"]}),(0,m.jsxs)("p",{className:"mr-10",children:[(0,m.jsx)("span",{className:"font-bold",children:Z.length})," ","following"]})]})}),(0,m.jsx)("div",{className:"container mt-4",children:(0,m.jsx)("p",{className:"font-medium",children:v||(0,m.jsx)(c.Z,{count:1,height:24})})})]})]})},v=function(e){var n=e.photos;return(0,m.jsxs)("div",{className:"border-t border-gray-primary mt-12 pt-4",children:[(0,m.jsx)("div",{className:"grid grid-cols-3 gap-8 mt-4 mb-12",children:n?n.length>0?n.map((function(e){return(0,m.jsxs)("div",{className:"relative group",children:[(0,m.jsx)("img",{src:"".concat(e.imageSrc),alt:e.caption}),(0,m.jsxs)("div",{className:"absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden",children:[(0,m.jsxs)("p",{className:"flex items-center text-white font-bold",children:[(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 mr-4",children:(0,m.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),e.likes.length]}),(0,m.jsxs)("p",{className:"flex items-center text-white font-bold",children:[(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 mr-4",children:(0,m.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),e.comments.length]})]})]},e.docId)})):null:(0,m.jsx)(o.Fragment,{children:(0,m.jsx)(c.Z,{count:12,width:320,height:400})})}),!n||0===n.length&&(0,m.jsx)("p",{className:"text-center text-2xl",children:"No Posts Yet"})]})},w=function(e){var n=e.user,t=(0,o.useReducer)((function(e,n){return(0,f.Z)((0,f.Z)({},e),n)}),{profile:{},photosCollection:[],followerCount:0}),c=(0,a.Z)(t,2),i=c[0],l=i.profile,d=i.photosCollection,p=i.followerCount,h=c[1];return(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u._T)(n.username);case 2:t=e.sent,h({profile:n,photosCollection:t,followerCount:n.followers.length});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,m.jsxs)("div",{children:[(0,m.jsx)(x,{photosCount:d?d.length:0,profile:l,followerCount:p,setFollowerCount:h}),(0,m.jsx)(v,{photos:d})]})},g=function(){var e=(0,i.UO)().username,n=(0,o.useState)(null),t=(0,a.Z)(n,2),f=t[0],p=t[1],h=(0,i.s0)();return(0,o.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.dQ)(e);case 2:(t=n.sent).length>0?p(t[0]):h(l.Hi);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[h,e]),null!==f&&void 0!==f&&f.username?(0,m.jsxs)("div",{className:"bg-gray-background",children:[(0,m.jsx)(d.Z,{}),(0,m.jsx)("div",{className:"mx-auto max-w-screen-lg",children:(0,m.jsx)(w,{user:f})})]}):(0,m.jsx)(o.Fragment,{children:(0,m.jsx)("div",{className:"flex gap-10 items-center justify-center h-50",children:(0,m.jsx)(c.Z,{count:1,width:840,height:250})})})}},7606:function(e,n,t){t.d(n,{$K:function(){return l},Gm:function(){return L},IU:function(){return C},NS:function(){return w},T6:function(){return Z},_T:function(){return N},dQ:function(){return f},ve:function(){return x},wP:function(){return j},xD:function(){return h}});var r=t(885),s=t(1413),a=t(4165),o=t(5861),c=t(3527),i=t(9062),u=c.w.db;function l(e){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,a.Z)().mark((function e(n){var t,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,i.hJ)(u,"users"),r=(0,i.IO)(t,(0,i.ar)("username","==",n.toLowerCase())),e.next=4,(0,i.PL)(r);case 4:return s=e.sent,e.abrupt("return",s.docs.length>0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,o.Z)((0,a.Z)().mark((function e(n){var t,r,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,i.hJ)(u,"users"),r=(0,i.IO)(t,(0,i.ar)("username","==",n.toLowerCase())),e.next=4,(0,i.PL)(r);case 4:return o=e.sent,c=o.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,a.Z)().mark((function e(n){var t,r,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,i.hJ)(u,"users"),r=(0,i.IO)(t,(0,i.ar)("userId","==",n)),e.next=4,(0,i.PL)(r);case 4:return o=e.sent,c=o.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,n){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)((0,a.Z)().mark((function e(n,t){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.hJ)(u,"users"),e.next=3,(0,i.PL)(r,(0,i.b9)(10));case 3:return o=e.sent,e.abrupt("return",o.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==n&&!t.includes(e.userId)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,n,t){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((0,a.Z)().mark((function e(n,t,r){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,i.JU)(u,"users",n),e.abrupt("return",(0,i.r7)(s,{following:r?(0,i.Ab)(t):(0,i.vr)(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,n,t){return b.apply(this,arguments)}function b(){return(b=(0,o.Z)((0,a.Z)().mark((function e(n,t,r){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,i.JU)(u,"users",n),e.abrupt("return",(0,i.r7)(s,{followers:r?(0,i.Ab)(t):(0,i.vr)(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,n){return y.apply(this,arguments)}function y(){return y=(0,o.Z)((0,a.Z)().mark((function e(n,t){var r,c,l,d,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.hJ)(u,"photos"),c=(0,i.IO)(r,(0,i.ar)("userId","in",t)),e.next=4,(0,i.PL)(c);case 4:return l=e.sent,d=l.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.next=8,Promise.all(d.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,t.likes.includes(n)&&(r=!0),e.next=4,h(t.userId);case 4:return o=e.sent,c=o[0].username,e.abrupt("return",(0,s.Z)((0,s.Z)({username:c},t),{},{userLikedPhoto:r}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 8:return f=e.sent,e.abrupt("return",f);case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function N(e){return k.apply(this,arguments)}function k(){return(k=(0,o.Z)((0,a.Z)().mark((function e(n){var t,o,c,l,d,p,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n);case 2:return t=e.sent,o=(0,r.Z)(t,1),c=o[0],l=(0,i.hJ)(u,"photos"),d=(0,i.IO)(l,(0,i.ar)("userId","==",c.userId)),e.next=9,(0,i.PL)(d);case 9:return p=e.sent,h=p.docs.map((function(e){return(0,s.Z)((0,s.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,n){return I.apply(this,arguments)}function I(){return(I=(0,o.Z)((0,a.Z)().mark((function e(n,t){var s,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n);case 2:return s=e.sent,o=(0,r.Z)(s,1),c=o[0],e.abrupt("return",!!c.following.includes(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,n,t,r,s){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)((0,a.Z)().mark((function e(n,t,r,s,o){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,s,n);case 2:return e.next=4,Z(r,o,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8175:function(e,n){n.Z=function(e){var n=new Image;return n.src=e,n.height?e:"./images/avatars/default.png"}},6839:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(885),s=t(1413);function a(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var o=t(2791),c=["count","wrapper","className","containerClassName","containerTestId","circle","style"],i=o.createContext({});function u(e){for(var n,t,u,l=e.count,d=void 0===l?1:l,f=e.wrapper,p=e.className,h=e.containerClassName,m=e.containerTestId,x=e.circle,v=void 0!==x&&x,w=e.style,g=a(e,c),Z=o.useContext(i),b=(0,s.Z)({},g),j=0,y=Object.entries(g);j<y.length;j++){var N=(0,r.Z)(y[j],2),k=N[0];"undefined"===typeof N[1]&&delete b[k]}var C=(0,s.Z)((0,s.Z)((0,s.Z)({},Z),b),{},{circle:v}),I=(0,s.Z)((0,s.Z)({},w),function(e){var n=e.baseColor,t=e.highlightColor,r=e.width,s=e.height,a=e.borderRadius,o=e.circle,c=e.direction,i=e.duration,u=e.enableAnimation,l=void 0===u||u,d={};return"rtl"===c&&(d["--animation-direction"]="reverse"),"number"===typeof i&&(d["--animation-duration"]="".concat(i,"s")),l||(d["--pseudo-element-display"]="none"),"string"!==typeof r&&"number"!==typeof r||(d.width=r),"string"!==typeof s&&"number"!==typeof s||(d.height=s),"string"!==typeof a&&"number"!==typeof a||(d.borderRadius=a),o&&(d.borderRadius="50%"),"undefined"!==typeof n&&(d["--base-color"]=n),"undefined"!==typeof t&&(d["--highlight-color"]=t),d}(C)),L="react-loading-skeleton";p&&(L+=" ".concat(p));for(var O=null!==(n=C.inline)&&void 0!==n&&n,E=[],P=Math.ceil(d),U=0;U<P;U++){var F=I;if(P>d&&U===P-1){var S=null!==(t=F.width)&&void 0!==t?t:"100%",J=d%1,M="number"===typeof S?S*J:"calc(".concat(S," * ").concat(J,")");F=(0,s.Z)((0,s.Z)({},F),{},{width:M})}var R=o.createElement("span",{className:L,style:F,key:U},"\u200c");O?E.push(R):E.push(o.createElement(o.Fragment,{key:U},R,o.createElement("br",null)))}return o.createElement("span",{className:h,"data-testid":m,"aria-live":"polite","aria-busy":null===(u=C.enableAnimation)||void 0===u||u},f?E.map((function(e,n){return o.createElement(f,{key:n},e)})):E)}}}]);
//# sourceMappingURL=577.b7e385ca.chunk.js.map