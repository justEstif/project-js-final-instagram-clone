"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[458],{2458:function(e,r,t){t.r(r),t.d(r,{default:function(){return h}});var n=t(4165),a=t(5861),u=t(885),s=t(2791),c=t(6871),o=t(3504),i=t(5187),p=t(8155),l=t(2303),d=t(7606),f=t(9062),m=t(184);function h(){var e=(0,s.useState)(""),r=(0,u.Z)(e,2),t=r[0],h=r[1],x=(0,s.useState)(""),y=(0,u.Z)(x,2),b=y[0],w=y[1],Z=(0,s.useState)(""),v=(0,u.Z)(Z,2),g=v[0],k=v[1],I=(0,s.useState)(""),j=(0,u.Z)(I,2),N=j[0],C=j[1],L=(0,s.useState)(""),P=(0,u.Z)(L,2),J=P[0],S=P[1],E=(0,c.s0)(),U=""===b||""===J,O=(0,s.useContext)(l.Z).firebase,T=O.db,A=O.auth;(0,s.useEffect)((function(){document.title="Signup - Instagram"}),[]);var D=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,r.preventDefault)(),h(""),e.prev=3,e.next=6,(0,d.$K)(g);case 6:if(e.sent){e.next=17;break}return e.next=10,(0,i.Xb)(A,J,b);case 10:return e.next=12,(0,i.ck)(A.currentUser,{displayName:g});case 12:return e.next=14,(0,f.ET)((0,f.hJ)(T,"users"),{userId:A.currentUser.uid,username:g.toLowerCase(),fullName:N,emailAddress:J.toLowerCase(),following:[],followers:[],dateCreated:Date.now()});case 14:E(p.h1),e.next=18;break;case 17:h("That username is already take, please try another.");case 18:e.next=27;break;case 20:e.prev=20,e.t0=e.catch(3),h(e.t0.message),k(""),C(""),w(""),S("");case 27:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(r){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{className:"container flex mx-auto max-w-screen-md items-center h-screen",children:[(0,m.jsx)("div",{className:"flex w-3/5",children:(0,m.jsx)("img",{src:"./images/iphone-with-profile.jpg",alt:"iPhone with Instagram"})}),(0,m.jsxs)("div",{className:"flex flex-col w-2/5 ",children:[(0,m.jsxs)("div",{className:"flex flex-col items-center bg-white p-4 rounded border border-gray-primary mb-4",children:[(0,m.jsx)("h1",{className:"flex justify-center w-full",children:(0,m.jsx)("img",{src:"./images/logo.png",alt:"instagram",className:"my-2 w-6/12"})}),t&&(0,m.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:t}),(0,m.jsxs)("form",{onSubmit:function(e){return D(e)},method:"post",children:[(0,m.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target.value;return k(r)},value:g}),(0,m.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full Name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target.value;return C(r)},value:N}),(0,m.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target.value;return S(r)},value:J}),(0,m.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target.value;return w(r)},value:b}),(0,m.jsx)("button",{disabled:U,type:"submit",className:"bg-blue-medium w-full rounded h-8 font-bold text-white\n              ".concat(U&&"opacity-50"),children:"Signup"})]})]}),(0,m.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 border border-gray-primary rounded",children:(0,m.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,m.jsx)(o.rU,{to:p.ym,className:"font-bold text-blue-medium",children:"Login"})]})})]})]})}},7606:function(e,r,t){t.d(r,{$K:function(){return p},Gm:function(){return L},IU:function(){return N},NS:function(){return b},T6:function(){return Z},_T:function(){return I},dQ:function(){return d},ve:function(){return x},wP:function(){return g},xD:function(){return m}});var n=t(885),a=t(1413),u=t(4165),s=t(5861),c=t(3527),o=t(9062),i=c.w.db;function p(e){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)((0,u.Z)().mark((function e(r){var t,n,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,o.hJ)(i,"users"),n=(0,o.IO)(t,(0,o.ar)("username","==",r.toLowerCase())),e.next=4,(0,o.PL)(n);case 4:return a=e.sent,e.abrupt("return",a.docs.length>0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)((0,u.Z)().mark((function e(r){var t,n,s,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,o.hJ)(i,"users"),n=(0,o.IO)(t,(0,o.ar)("username","==",r.toLowerCase())),e.next=4,(0,o.PL)(n);case 4:return s=e.sent,c=s.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)((0,u.Z)().mark((function e(r){var t,n,s,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,o.hJ)(i,"users"),n=(0,o.IO)(t,(0,o.ar)("userId","==",r)),e.next=4,(0,o.PL)(n);case 4:return s=e.sent,c=s.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r){return y.apply(this,arguments)}function y(){return(y=(0,s.Z)((0,u.Z)().mark((function e(r,t){var n,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.hJ)(i,"users"),e.next=3,(0,o.PL)(n,(0,o.b9)(10));case 3:return s=e.sent,e.abrupt("return",s.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==r&&!t.includes(e.userId)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,r,t){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)((0,u.Z)().mark((function e(r,t,n){var a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.JU)(i,"users",r),e.abrupt("return",(0,o.r7)(a,{following:n?(0,o.Ab)(t):(0,o.vr)(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,r,t){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)((0,u.Z)().mark((function e(r,t,n){var a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.JU)(i,"users",r),e.abrupt("return",(0,o.r7)(a,{followers:n?(0,o.Ab)(t):(0,o.vr)(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r){return k.apply(this,arguments)}function k(){return k=(0,s.Z)((0,u.Z)().mark((function e(r,t){var n,c,p,l,d;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.hJ)(i,"photos"),c=(0,o.IO)(n,(0,o.ar)("userId","in",t)),e.next=4,(0,o.PL)(c);case 4:return p=e.sent,l=p.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.next=8,Promise.all(l.map(function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,s,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,t.likes.includes(r)&&(n=!0),e.next=4,m(t.userId);case 4:return s=e.sent,c=s[0].username,e.abrupt("return",(0,a.Z)((0,a.Z)({username:c},t),{},{userLikedPhoto:n}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 8:return d=e.sent,e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function I(e){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)((0,u.Z)().mark((function e(r){var t,s,c,p,l,f,m;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(r);case 2:return t=e.sent,s=(0,n.Z)(t,1),c=s[0],p=(0,o.hJ)(i,"photos"),l=(0,o.IO)(p,(0,o.ar)("userId","==",c.userId)),e.next=9,(0,o.PL)(l);case 9:return f=e.sent,m=f.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",m);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,r){return C.apply(this,arguments)}function C(){return(C=(0,s.Z)((0,u.Z)().mark((function e(r,t){var a,s,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(r);case 2:return a=e.sent,s=(0,n.Z)(a,1),c=s[0],e.abrupt("return",!!c.following.includes(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,r,t,n,a){return P.apply(this,arguments)}function P(){return(P=(0,s.Z)((0,u.Z)().mark((function e(r,t,n,a,s){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,a,r);case 2:return e.next=4,Z(n,s,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=458.b2b4c964.chunk.js.map